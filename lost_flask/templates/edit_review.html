<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ¬ãƒ“ãƒ¥ãƒ¼ç·¨é›†</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
    <!-- CSSèª­ã¿è¾¼ã¿ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=7">
</head>
<body>
    <a href="{{ url_for('index') }}">
        <img src="{{ url_for('static', filename='Blueonly.png') }}" alt="å¤§å­¦ãƒ­ã‚´" id="logo-banner">
    </a>

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰ -->
    <div class="user-header">
        <a href="{{ url_for('swipe_page') }}" class="header-action-btn">
            âš¡ é«˜é€Ÿãƒ¬ãƒ“ãƒ¥ãƒ¼
        </a>

        <div class="dropdown" tabindex="0">
            <div class="dropbtn">
                <span>{{ current_user.username }} ã•ã‚“</span>
                <span style="font-size: 0.8em; margin-left: 5px;">â–¼</span>
            </div>
            <div class="dropdown-content">
                <a href="{{ url_for('mypage') }}">ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
                <a href="{{ url_for('help_page') }}">â“ ä½¿ã„æ–¹</a>
                <a href="{{ url_for('logout') }}" class="logout-item">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
            </div>
        </div>
    </div>

    <div class="container">
        <header class="main-header">
            <h1 class="app-title" style="font-size: 1.8em;">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç·¨é›†</h1>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, message in messages %}
                <div class="flash-message {{ category }}">{{ message }}</div>
              {% endfor %}
            {% endif %}
        {% endwith %}

        <section class="course-info">
            <div class="course-info-details" style="background: #fff; border: none; padding: 0;">
                <p><strong>è¬›ç¾©åï¼š</strong> {{ course.name }}</p>
                <p><strong>æ‹…å½“æ•™å“¡ï¼š</strong> {{ course.teacher }}</p>
            </div>
        </section>

        <section>
            <form action="{{ url_for('edit_review', review_id=review.id) }}" method="post">

                <h4>ç·åˆè©•ä¾¡</h4>
                <div class="star-rating-input">
                    <input type="radio" id="rating-5" name="rating" value="5.0" {% if review.rating == 5.0 %}checked{% endif %} required><label class="star half-right" for="rating-5">â˜…</label>
                    <input type="radio" id="rating-4.5" name="rating" value="4.5" {% if review.rating == 4.5 %}checked{% endif %}><label class="star half" for="rating-4.5">â˜…</label>
                    <input type="radio" id="rating-4" name="rating" value="4.0" {% if review.rating == 4.0 %}checked{% endif %}><label class="star half-right" for="rating-4">â˜…</label>
                    <input type="radio" id="rating-3.5" name="rating" value="3.5" {% if review.rating == 3.5 %}checked{% endif %}><label class="star half" for="rating-3.5">â˜…</label>
                    <input type="radio" id="rating-3" name="rating" value="3.0" {% if review.rating == 3.0 %}checked{% endif %}><label class="star half-right" for="rating-3">â˜…</label>
                    <input type="radio" id="rating-2.5" name="rating" value="2.5" {% if review.rating == 2.5 %}checked{% endif %}><label class="star half" for="rating-2.5">â˜…</label>
                    <input type="radio" id="rating-2" name="rating" value="2.0" {% if review.rating == 2.0 %}checked{% endif %}><label class="star half-right" for="rating-2">â˜…</label>
                    <input type="radio" id="rating-1.5" name="rating" value="1.5" {% if review.rating == 1.5 %}checked{% endif %}><label class="star half" for="rating-1.5">â˜…</label>
                    <input type="radio" id="rating-1" name="rating" value="1.0" {% if review.rating == 1.0 %}checked{% endif %}><label class="star half-right" for="rating-1">â˜…</label>
                    <input type="radio" id="rating-0.5" name="rating" value="0.5" {% if review.rating == 0.5 %}checked{% endif %}><label class="star half" for="rating-0.5">â˜…</label>
                </div>
                
                <h4>å‡ºå¸­</h4>
                <div class="radio-group">
                    <label><input type="radio" name="attendance" value="ã‚ã‚Š" {% if review.attendance == 'ã‚ã‚Š' %}checked{% endif %} required><span>ã‚ã‚Š</span></label>
                    <label><input type="radio" name="attendance" value="ãªã—" {% if review.attendance == 'ãªã—' %}checked{% endif %}><span>ãªã—</span></label>
                    <label><input type="radio" name="attendance" value="ãã®ä»–" {% if review.attendance == 'ãã®ä»–' %}checked{% endif %}><span>ãã®ä»–</span></label>
                </div>

                <h4>ãƒ†ã‚¹ãƒˆ</h4>
                <div class="radio-group">
                     <label><input type="radio" name="test" value="ã‚ã‚Š" {% if review.test == 'ã‚ã‚Š' %}checked{% endif %} required><span>ã‚ã‚Š</span></label>
                    <label><input type="radio" name="test" value="ãªã—" {% if review.test == 'ãªã—' %}checked{% endif %}><span>ãªã—</span></label>
                    <label><input type="radio" name="test" value="ãã®ä»–" {% if review.test == 'ãã®ä»–' %}checked{% endif %}><span>ãã®ä»–</span></label>
                </div>

                <h4>ãƒ¬ãƒãƒ¼ãƒˆ</h4>
                <div class="radio-group">
                     <label><input type="radio" name="report" value="ã‚ã‚Š" {% if review.report == 'ã‚ã‚Š' %}checked{% endif %} required><span>ã‚ã‚Š</span></label>
                    <label><input type="radio" name="report" value="ãªã—" {% if review.report == 'ãªã—' %}checked{% endif %}><span>ãªã—</span></label>
                    <label><input type="radio" name="report" value="ãã®ä»–" {% if review.report == 'ãã®ä»–' %}checked{% endif %}><span>ãã®ä»–</span></label>
                </div>

                <h4>æˆæ¥­å½¢å¼ <small style="font-weight:normal; color:var(--text-sub)">(ä»»æ„)</small></h4>
                <div class="radio-group">
                    <label><input type="radio" name="course_format" value="å¯¾é¢" {% if review.course_format == 'å¯¾é¢' %}checked{% endif %}><span>å¯¾é¢</span></label>
                    <label><input type="radio" name="course_format" value="ã‚ªãƒ³ãƒ©ã‚¤ãƒ³" {% if review.course_format == 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' %}checked{% endif %}><span>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³</span></label>
                     <label><input type="radio" name="course_format" value="ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰" {% if review.course_format == 'ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰' %}checked{% endif %}><span>ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰</span></label>
                    <label><input type="radio" name="course_format" value="ãã®ä»–" {% if review.course_format == 'ãã®ä»–' %}checked{% endif %}><span>ãã®ä»–</span></label>
                </div>
                
                <h4>é–‹è¬›å¹´åº¦ <small style="font-weight:normal; color:var(--text-sub)">(ä»»æ„)</small></h4>
                <input type="text" name="year" placeholder="ä¾‹ï¼š 2024å¹´åº¦" value="{{ review.year or '' }}">

                <h4>é–‹è¬›æ•™å®¤ <small style="font-weight:normal; color:var(--text-sub)">(ä»»æ„)</small></h4>
                <input type="text" name="classroom" placeholder="ä¾‹ï¼š å…±é€šæ•™è‚²æ£Ÿ1-101" value="{{ review.classroom or '' }}">
                
                <h4>å‚™è€ƒæ¬„ <small style="font-weight:normal; color:var(--text-sub)">(ä»»æ„)</small></h4>
                <textarea name="review" placeholder="å˜ä½ã®å–ã‚Šã‚„ã™ã•ã€èª²é¡Œã®é‡ã€ãƒ†ã‚¹ãƒˆå½¢å¼ã€ãã®ä»–ç‰¹è¨˜äº‹é …ãªã©">{{ review.review or '' }}</textarea>

                <div style="margin-top: 40px; display: flex; gap: 20px; align-items: center;">
                    <a href="{{ url_for('course_view_detail', id=course.id) }}" class="btn-cancel" style="flex: 1; text-align: center;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
                    <button type="submit" class="btn" style="flex: 2;">æ›´æ–°ã™ã‚‹</button>
                </div>
            </form>
            
            <div class="delete-section">
                <form action="{{ url_for('delete_review', review_id=review.id) }}" method="POST">
                    <button type="submit" onclick="return confirm('æœ¬å½“ã«ã“ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\nâ€»ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚');" 
                            class="btn-delete-danger">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        ã“ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã™ã‚‹
                    </button>
                </form>
            </div>

        </section>
    </div>
</body>
</html>